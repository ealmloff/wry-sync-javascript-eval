# Wry bindgen
This is a replacement for wasm bindgen in the wry-bindgen folder. Status:
- [x] Minimal features in web-sys compiling with the new bindgen
- [x] Web-sys compiling with --all-features
  - [x] Support for Clamped type
  - [x] Support for Option<Vec<T>>
- [x] Js-sys compiling with the new bindgen
- [x] Basic roundtrip tests passing
- [x] Casting and type checking
- [x] Don't hardcode drop and clone implementations - use the macro

## Project structure
The wry-bindgen project is structured as follows:
- `wry-bindgen`: The core crate that handles types for calls into and from the wry webview.
- `wry-bindgen-macro`: The procedural macro crate that generates the bindings.
- `wasm-bindgen`: A submodule which contains the original wasm-bindgen code for reference. THIS MAY NEVER BE MODIFIED.

## Requirements
- Tests are in the `/tests` folder. Any new behavior should be covered by tests. Test should only take < 30 seconds to run. Run them with a timeout of 30 seconds.
- No `js` files should be modified manually. All `js` files are autogenerated from `ts` files in the build.rs

## CI Checks

CI runs the following checks with rust 1.88. When running these checks locally, make sure to use `cargo +1.88` to ensure compatibility:

- `cargo +1.88 fmt --all -- --check` - Format check
- `cargo +1.88 check --workspace --all-features` - Compile check
- `cargo +1.88 clippy --workspace --all-features` - Lint check
- `cargo +nightly doc --no-deps --all-features -p wry-testing -p wasm-bindgen -p wry-bindgen-macro -p wry-bindgen-macro-support` - Documentation check (uses nightly, with `RUSTDOCFLAGS=-Dwarnings`)
- `cargo +1.88 test --workspace --all-features -- --test-threads=1` - Test check

To automatically fix issues, you can run the following commands:
- `./automated-fix-tests.sh` - This script will automatically fix formatting and lint issues, then run all checks to ensure everything is still working.